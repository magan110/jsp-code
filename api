<!DOCTYPE html>
<html lang="en">
	
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<meta name="viewport" content="width=device-width, user-scalable=no"  >
	<meta name="format-detection" content="telephone=no" />
	<meta name="msapplication-tap-highlight" content="no" />
	<meta http-equiv="Cache-Control" content="no-store, max-age=0">
	<meta name="color-scheme" content="light dark" />
	<!-- add to homescreen for ios -->
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta name="Keywords" content="SPARSH">
	<meta name="Description" content="Birla White SPARSH">

	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title style = "Color: Green;">Birla White</title>
	<link rel="shortcut icon" href="/Stat/images/favicon.png" />
	<!--<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" />
	end::Fonts-->
	<!--begin::Global Stylesheets Bundle(used by all pages)-->
	<link href="/Envr/assets/plugins/global/plugins.bundle.css" rel="stylesheet" type="text/css" />
	<link href="/Envr/assets/css/style.bundle.css" rel="stylesheet" type="text/css" />
	<script src="/Envr/js/jquery341.js"></script>	

<script>

async function ChekUserName(username) 
{

    const isMobile = /Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

    if (isMobile) 
	{
        console.log('Function will not run on mobile devices.');
        return;
    }

    try 
	{
        const response = await fetch('/BirlaWhite/NoSec/usernameVerfy.jsp?secretKey=BWUSERNAMEVERIFY678%%JKJASINSPOP');
        const data = await response.json();


        const specificUsernames = data.map(item => item.username);

        username = username.trim().toUpperCase();

        const redirectUrl = 'https://10.1.63.101/';

        if (specificUsernames.includes(username)) 
        {
        //    window.location.href = redirectUrl;
        } 
        else 
        {
            // alert("Username not found in specificUsernames array");
        }
    } 
	catch (error) 
	{
        console.error('Error fetching usernames:', error);
    }
}

async function loginChk(username) 
{
	const url = "/Envr/JSP/LoginChk.jsp";

	$.ajax(
	{
		url:url,    //the page containing php script
		type: "GET",    //request type,
		success:function(reponse, data)
		{
			console.log(reponse);
			var cstCrdLt = reponse.trim().split("~~");
		//	alert(cstCrdLt[2]);
			if(data.trim() == "success");
			{
				if(cstCrdLt[2] == "Y")
				{
					//location.href = "/Envr/JSP/LoggedInCom.jsp";  
				}
			}
		},
		error: function (err)
		{
			console.log(err);
		}
	});
}

/*async function checkIpAndRedirect() 
{
    try 
	{
        const response = await fetch('https://qa.birlawhite.com/BirlaWhite/NoSec/iphostdetc.jsp');
        const data = await response.json();
        const orgniz = data.clientIp;

        // Define IP ranges
        const ipRanges = ['10.4.64.', '10.4.65.'];
        const redirectUrl = 'https://10.4.64.10/';

        // Check if the IP address starts with any of the specified ranges
        const shouldRedirect = ipRanges.some(prefix => orgniz.startsWith(prefix));

        if (shouldRedirect) 
		{
            window.location.href = redirectUrl;
        }
    } 
	catch (error) 
	{
        console.error('Error fetching IP address:', error);
    }
}*/
    </script>

</head>
<script>

if(window.location.hostname == "sparsh")
	window.location = 'https://10.4.64.10' + window.location.pathname + window.location.hash;

if (window.location.protocol !== 'https:' && window.location.hostname != "10.1.63.101") 
{
	if(window.location.hostname == "sparsh")
		window.location = 'https://10.4.64.10' + window.location.pathname + window.location.hash;
	else
		window.location = 'https://' + window.location.hostname + window.location.pathname + window.location.hash;
}

if(!navigator.onLine)
{
	alert("Please check internet connection");
}
loginChk();
/*
*/
</script>

<style type="text/css">
body 
{
  background-color: #fce4ec; /* Light Pink */
  background-position: right;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

.d-flex.flex-column.flex-root 
{
  color: #e74c3c; /* Red */
}

div 
{
  color: #4c1130;
}

button 
{
  color: #e74c3c; /* Red */
}

footer 
{
  text-align: center;
  padding: 2px;
 /* background-color: #e3e3e3;  Light Gray */
  color: #ffffff;
}

.confetti 
{
  display: flex;
  justify-content: center;
  align-items: center;
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
  z-index: 1000;
}

.confetti-piece 
{
  position: absolute;
  width: 10px;
  height: 30px;
  background: #ffd300; /* Yellow */
  top: 0;
  opacity: 0;
}

.confetti-piece:nth-child(odd) 
{
  background: #7431e8; /* Purple */
}

.confetti-piece:nth-child(even) 
{
  z-index: 1;
}

.confetti-piece:nth-child(4n) 
{
  width: 5px;
  height: 12px;
  -webkit-animation-duration: 2000ms;
}

.confetti-piece:nth-child(3n) 
{
  width: 3px;
  height: 10px;
  -webkit-animation-duration: 2500ms;
  -webkit-animation-delay: 1000ms;
}

.confetti-piece:nth-child(4n-7) 
{
  background: #e74c3c; /* Red */
}

@keyframes makeItRain 
{
  from 
  {
    opacity: 0;
  }
  50% 
  {
    opacity: 1;
  }
  to 
  {
    transform: translateY(350px);
  }
}

.pyro > .before,
.pyro > .after 
{
  position: absolute;
  width: 5px;
  height: 5px;
  border-radius: 50%;
  box-shadow: -120px -218.66667px blue, 248px -16.66667px #00ff84, 190px 16.33333px #002bff, -113px -308.66667px #ff009d, -109px -287.66667px #ffb300, -50px -313.66667px #ff006e, 226px -31.66667px #ff4000, 180px -351.66667px #ff00d0, -12px -338.66667px #00f6ff, 220px -388.66667px #99ff00, -69px -27.66667px #ff0400, -111px -339.66667px #6200ff, 155px -237.66667px #00ddff, -152px -380.66667px #00ffd0, -50px -37.66667px #00ffdd, -95px -175.66667px #a6ff00, -88px 10.33333px #0d00ff, 112px -309.66667px #005eff, 69px -415.66667px #ff00a6, 168px -100.66667px #ff004c, -244px 24.33333px #ff6600, 97px -325.66667px #ff0066, -211px -182.66667px #00ffa2, 236px -126.66667px #b700ff, 140px -196.66667px #9000ff, 125px -175.66667px #00bbff, 118px -381.66667px #ff002f, 144px -111.66667px #ffae00, 36px -78.66667px #f600ff, -63px -196.66667px #c800ff, -218px -227.66667px #d4ff00, -134px -377.66667px #ea00ff, -36px -412.66667px #ff00d4, 209px -106.66667px #00fff2, 91px -278.66667px #000dff, -22px -191.66667px #9dff00, 139px -392.66667px #a6ff00, 56px -2.66667px #0099ff, -156px -276.66667px #ea00ff, -163px -233.66667px #00fffb, -238px -346.66667px #00ff73, 62px -363.66667px #0088ff, 244px -170.66667px #0062ff, 224px -142.66667px #b300ff, 141px -208.66667px #9000ff, 211px -285.66667px #ff6600, 181px -128.66667px #1e00ff, 90px -123.66667px #c800ff, 189px 70.33333px #00ffc8, -18px -383.66667px #00ff33, 100px -6.66667px #ff008c;
  animation: 1s bang ease-out infinite backwards, 1s gravity ease-in infinite backwards, 5s position linear infinite backwards;
}

.pyro > .after 
{
  animation-delay: 3.25s, 3.25s, 9.25s;
  animation-duration: 3.25s, 3.25s, 9.25s;
}

</style>


<body id="kt_body" class="page-loading-enabled page-loading header-fixed header-tablet-and-mobile-fixed "  style="--kt-toolbar-height:55px;--kt-toolbar-height-tablet-and-mobile:55px" onLoad="imageGen()">

<div class=" d-flex flex-column flex-root" >
	<div class="d-flex flex-column flex-lg-row flex-column-fluid">
		<!--Start::Aside-->
		<a href = 'https://www.youtube.com/embed/4oTONl-WIZU' target="_blank" > <div class="banner-sec d-flex flex-column flex-lg-row-auto w-xl-850px positon-xl-relative">
			<div class="d-flex flex-column position-xl-fixed top-0 bottom-0 w-xl-700px scroll-y">
				<div class="d-flex flex-row-fluid flex-column text-center">
				</div>
			</div>
			</a>
		</div>
	<!--	end::Aside-->
		<!--begin::Body-->

			<div class="d-inline-flex p-2 flex-center flex-row flex-column-fluid">
				<!--begin::Wrapper-->
				<div class="w-lg-500px lgnWind rounded shadow-sm p-10 p-lg-15 mx-auto bg-body">
					<!--begin::Form-->
					<form class="form w-100" action="#" name="Login" autocomplete="on"  id="login" novalidate="novalidate" id="kt_sign_in_form" action="#">
						<!--begin::Heading-->
						<div class="text-center mb-10">
                          <div class="col-lg-12 text-center" id="logoImage">
								<img alt="Logo" src="/Envr/assets_kitsune/media/logos/birla-white-logo.png" class="h-50px h-lg-50px animated bounce infinite" id="animated-img1" />
						 </div>
						<br>
          
							<!--begin::Title-->
							<h1> <blink style="color:#4c1130; " class="text-Solid mb-3 animate-charcter">SPARSH</h1>    <!--  font-family: emoji;animation-name: fadeInOut, moveLeft300px, bounce; -->
							
							<!--end::Title-->
						</div>
					
						<!--begin::Heading-->
						
						<!--begin::Input group-->
							<input type="hidden" name="isMobile" value="false">
							<input type="hidden" name="mobilApp" value="false">
							<input type="hidden" name="mobileNo" value="">
							<input type="hidden" name="appRegId" value="">
							<input type="hidden" name="verOSdNo" value="">
							<input type="hidden" name="versinNo" value="">
							<input type="hidden" name="sparhApp" id="sparhApp" value="Y">
							<input type="hidden" name="image1" value="">
							<input type="hidden" name="image2" value="">
							<input type="hidden" name="imgValid" value="N">
							<div class="fv-row mb-10">
								<label class="form-label fs-6 fw-bolder text-dark required" >Username / Mobile No</label>
							
		<input type="text" id="userid" name="loginId" class="form-control form-control-lg form-control-solid col-md-4" value="" autocomplete="off" placeholder="User ID" onChange="return loginIdChange(this)" maxlength=10 autofocus oninput="return ChekUserName(this.value)" required>
 
							</div>
							<div class="fv-row mb-10">
								<div class="d-flex flex-stack mb-2">
									<!--begin::Label-->
									<label class="form-label fw-bolder text-dark fs-6 mb-0 required">Password</label>
									<!--end::Label-->
									<!--begin::Link-->
									<a href="#"  onclick="return forgot()" tabindex=-1 class="link-primary fs-6 fw-bolder">Forgot Password ?</a>
									<!--end::Link-->
								</div>
								<input type="password" name="password" id="password-3" value="" autocomplete="off" placeholder="Password" maxlength="18" class="form-control"  required>
							</div>
							<div id="siteMktgDiv" style="display:none;">
								<input type="radio" name="siteMktg" value="S"> Site
								<input type="radio" name="siteMktg" value="M"> Marketing<br>
							</div>
						  <!--  <h1>Your IP Address</h1>
						   							<p id="ip"></p> -->
						  <div class="row" id="captcha">
							<div class="col-12 float-right">
								<input type="text" id="captcha" name="imageChr" class="form-control" value="" autocomplete="off" placeholder="Type character of the image shown below" size="2" maxlength="2" required>
							</div>
							 <div class="col-12 text-center imageCaptcha">
							  <div id="image"></div> 
							</div>
						 </div>
              <script type="text/javascript">
                document.getElementById("userid").style.color = "blue";
                document.getElementById("password-3").style.color = "blue";
                document.getElementById("captcha").style.color = "blue";
              </script>
						<div class="text-center">
							<button style = "color: blue;" type="button" id="btnSubmit" data-loading-text="Loading..." data-role="button" data-icon="check" data-inline="true" class="btn btn-primary w-100 mb-5 bg-success" onClick="return submitValid()" autocomplete="off">
								<span style= "color: black;" class="indicator-label">Login</span>
								<span class="indicator-progress">Please wait... We are fetching data
								<span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>
							</button>
						<!-- 	<input type="button" name="newLgn" id="newLgn" value="New User" class="col-12 btn btn-login " onClick="return urlCall('N')"> -->
						<!--	<input type="button" name="skipLgn" id="skipLgn" value="Skip Login" class="btn btn-light-warning w-100 mb-5 " onClick="return urlCall('S')">-->
							<input type="button" name="skipLgn" id="skipLgn" value="Login With OTP" class="btn btn-light-info w-100 mb-5" onClick="return urlCall('LO')">
						 </div>

					</form>
						<footer><b class="wishes" behavior="alternate"> 
  Developed By: BIRLA WHITE IT  <span style="color:red"> &#10084; &#65039; </span> <br>   </b>
  </footer>

</body>

</html>
		<script>var hostUrl = "assets/";</script>
<script src="/Envr/js/jquery341.js"></script>
<script src="/Envr/assets/plugins/global/plugins.bundle.js"></script>
<script src="/Envr/assets/js/scripts.bundle.js"></script>
<script src="/Envr/assets/js/custom/authentication/sign-in/general.js"></script>
<style>
/* Modernized Styles with New Color Theme */

body {
    background: linear-gradient(135deg, #e0e7ff, #c7d2fe, #a5b4fc, #818cf8);
    margin: 0;
    padding: 0;
    overflow: hidden;
    user-select: none;
    font-family: 'Poppins', sans-serif;
    color: #2d3748;
}

/* Character Animation */
.animate-charcter {
    text-transform: uppercase;
    background-image: linear-gradient(-225deg, #a3e635 0%, #22d3ee 29%, #c084fc 67%, #818cf8 100%);
    background-size: 200% auto;
    color: #fff;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: textclip 3s linear infinite;
}

@keyframes textclip {
    to { background-position: 200% center; }
}

/* Link Styling */
.link-primary {
    color: #3b82f6;
    transition: color 0.3s;
}

.link-primary:hover, .link-primary:focus {
    color: #9333ea;
}

/* Form Control Styles */
.form-control.form-control-solid {
    background-color: transparent;
    border-color: #d1d5db;
    color: #1f2937;
    transition: color 0.2s ease, background-color 0.2s ease;
}

.form-control.form-control-solid:focus, .dropdown.show>.form-control.form-control-solid {
    background-color: #e0f2fe;
    border-color: #60a5fa;
    color: #1f2937;
}

/* Animated Text Header */
h1 {
    cursor: pointer;
    padding: 10px 20px;
    font-size: 28px;
    border-radius: 15px;
    transition: all 0.5s;
}

h1:hover {
    border-radius: 0;
}

/* Modal Styles */
.modal-content {
    border-radius: 20px;
    box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
}

/* Hover Effects */
img:hover {
    transform: scale(1.1);
}

label:hover {
    color: #64748b;
}

/* Login Window */
.lgnWind {
    padding: 20px;
    background: linear-gradient(62deg, #dbeafe, #bfdbfe, #93c5fd);
    border-radius: 30px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    transition: transform 0.2s ease;
}

.lgnWind:hover {
    box-shadow: 0 12px 28px rgba(0, 0, 0, 0.25);
}

/* Input Field */
input {
    border: 2px solid #d1d5db;
    padding: 10px;
    border-radius: 30px;
    transition: background-color 0.3s, box-shadow 0.3s;
}

input:focus {
    border-color: #4f46e5;
    box-shadow: 0 0 5px rgba(79, 70, 229, 0.5);
}

input:hover {
    background-color: #e5e7eb;
}

/* Footer Styling */
footer .wishes {
    font-size: 20px;
    color: #374151;
    margin-top: 18px;
}

/* Gradient Animation */
@keyframes changeColors {
    0% { background-position: 0% 50%; }
    100% { background-position: 100% 50%; }
}

.banner-sec {
    background-image: url(/Stat/images/spdMob.jpg) !important;
    background-size: cover;
    background-repeat: no-repeat;
    animation: changeColors 180s linear infinite;
}

/* Button Styles */
.btn-primary {
    background-color: #6366f1;
    border: none;
    transition: background-color 0.3s;
}

.btn-primary:hover {
    background-color: #4f46e5;
}

.btn-light-info {
    background-color: #ecfeff;
    color: #06b6d4;
}

/* Other Element Styles */
.text-dark {
    color: #f3f4f6;
}

.flag {
    width: 200px;
    margin: 5px auto;
}

.circle {
    width: 40px;
    height: 40px;
    border: 2px solid #06b6d4;
    border-radius: 50%;
    margin: 0 auto;
    animation: circle 10s linear infinite;
}

@keyframes circle {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.flag-wave {
    width: 100%;
    height: 100%;
    background-size: 200%;
    animation: flutter 8s cubic-bezier(.16, .14, .82, .73) infinite;
}

@keyframes flutter {
    0%, 100% { background-position: -200% 0; }
    30% { background-position: -60% 5px; }
    70% { background-position: 70% -5px; }
}

</style>
<script type="text/javascript" language="javascript1.2">

function getBuildNumb(str) 
{
	var myVar = null;
	myVar = Android.getBuildNumb();
}

var appName = "SPARSH";
function getappName() 
{
	//appName = Android.appName();
	document.getElementById("appName").innerHTML = appName;

	if(appName == "UNNATI")
	{
		document.Login.sparhApp.value = "N";
		$("#newLgn").show();
		$("#sprshBtn").hide();
		$("#skipLgn").hide();
		$("#unatiBtn").show();
	}
}


var loginBlkArr1 = new Array('');
var loginBlkArr2 = new Array('');
var arr = new Array ('A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z');

var tgrtDest = "";
var passDest = "";
var isMobile = "";
var IdInfoSt = "\n\nI/We give our explicit and absolute consent to UltraTech Cement Limited for using the above said data to enable UltraTech Cement Limited to register me/us as a Employee/Dealer/Retailer/Vendor/Influencer/Transporter/C&F agent of UltraTech Cement Limited. We agree and confirm that this consent has been given by us in accordance with the provision of Rule 5 of Information Technology (Reasonable security practices and procedures and sensitive data or information) Rules, 2011";

var bannerLocal = "This is an Aditya Birla Group Company system and is meant for official use by authorized users. Accessing and using this system constitutes consent to monitoring, interception, retrieval, recording, reading, copying, searching or capturing and disclosure of any information as to any information processed, stored or manipulated within the system, including but not limited to information stored locally on the hard drive or other media in use with this unit internally or externally (e.g., floppy disks, tapes, CD-ROMs, PDA's etc.) by the company management or law enforcement agencies. Unauthorized or improper use of this system may lead to prosecution resulting in disciplinary, criminal or civil penalties.\n\nSuspected access violations or breach of security policy should be reported to <<< IT BirlaWhite>>>>" + IdInfoSt;
var bannerWeb = "You are about to log on to a proprietary computer system where access is provided, by the Owner of the computer system, only to authorised users. If you are not authorised to use this system, please refrain from doing so. All activities on this system are being monitored. Unauthorized access to this system may be subjected to legal action, and/or prosecution." + IdInfoSt;
var bannerBlk1 = "Your access to log on to SPARSH has been temporarily stopped as you have not yet signed the Acceptable Use Policy. It is compulsory to be signed, as per The Information Security Policy issued by the Chairman. Please contact Mr Ram Babu Gupta at Time Office";
var bannerBlk2 = "Your access to log on to SPARSH has been temporarily stopped as you have not yet signed the Non discloser Agreement. It is compulsory to be signed, as per The Information Security Policy issued by the Chairman. Please contact Mr Ram Babu Gupta at Time Office";
var bannerToDisp = "";

function forgot()
{
	if (!loginIdChange())
	{
		displErr("Please enter the User Name");
		document.Login.loginId.focus();
		return false;
	}

	document.Login.method = "Post";
	document.Login.action = passDest;
	document.Login.submit();
}

function loginIdChange()
{
	tgrtDest = "",
	siteMktg = "";

	loginIdn = document.Login.loginId.value.toUpperCase();
	
	if(loginIdn.length == 10 && Number.isInteger(parseInt(document.Login.loginId.value)) && appName != "UNNATI")
	{
		//	$("siteMktgDiv").show();
		document.getElementById('siteMktgDiv').style.display = "block";
		
	//	document.getElementById("siteMktgDiv").style.visibility = "true";
	}
	else if(appName == "UNNATI")
	{
  		document.getElementById('siteMktgDiv').style.display = "none";
		siteMktg = "M";
	}
	else
	{
		document.getElementById('siteMktgDiv').style.display = "none";

		loginId1 = loginIdn.substring(0,1);
		loginId2 = loginIdn.substring(1,2);
		loginId3 = loginIdn.substring(2,3);
		loginId4 = loginIdn;
	//	 alert(loginIdn.substring(0,2));
		if(loginId1 == "S")
		{
			loginId4 = loginIdn.substring(1, 5);
		}

		if (document.Login.loginId.value == "")
		{
			displErr("User Name cannot be blank");
			document.Login.loginId.focus();
			return false;
		}
		if(loginIdn.substring(0,2) == "PZ")
		{
			bannerToDisp = bannerWeb;
			siteMktg = "M";
		}
		else if (loginIdn == "GUEST" || loginIdn.substring(0,2) == "LT" || ((loginId1 == "S" || loginId1 == "W" || loginId1 == "O" || loginId1 == "T" || loginId1 == "C") && parseInt(loginId2) >= 0 && parseInt(loginId2) <= 9) || (loginId1 == "F" && loginId2 == "A" && parseInt(loginId3) >= 0 && parseInt(loginId3) <= 9) || (loginId1 == "P" && parseInt(loginId3) >= 0 && parseInt(loginId3) <= 9 && (loginIdn.length == 6 || loginIdn.length == 7)))
		{
			bannerToDisp = bannerLocal;
			siteMktg = "S";
		}
		else 
		{
			bannerToDisp = bannerWeb;
			siteMktg = "M";
		}
	}
	document.Login.siteMktg.value = siteMktg;

	tgrtDest = "/Envr/Login/LoginCom.jsp";
	passDest = "/Envr/Login/PwdMailCom.jsp";

	if (isMobile.matches) 
		document.Login.mobilApp.value = "true";

//alert(tgrtDest);
	return true;
}

function imageGen()
{

	document.Login.image1.value = "";
	document.Login.image2.value = "";

	for (var cnt=1; cnt<=2; cnt++)
	{
		a = 'N';
		while (a == 'N')
		{
			num = Math.round(Math.random() * 100, 0);
			if (num > 0 && num <= 26)
			{
				a = 'Y';
				eval("document.Login.image" + cnt).value = num;
			}
		}
	}

	document.getElementById("image").innerHTML = "<img src='/Stat/images/alpha1/" + document.Login.image1.value + ".gif'>" + "<img src='/Stat/images/alpha1/" + document.Login.image2.value + ".gif'>";
}

function submitValid(/*sitMktFl*/)
{
//	alert(document.Login.siteMktg.value);
	if (document.Login.loginId.value == "")
	{
		displErr ("User Name cannot be blank");
		document.Login.loginId.focus();
		return false;
	}

	if (!loginIdChange()) // for resetting values
		return false;

	if (document.Login.password.value == "")
	{
		displErr ("Password cannot be blank");
		document.Login.password.focus();
		return false;
	}
	
			
	if(document.Login.siteMktg.value == "S")
	{
		bannerToDisp = bannerLocal;
	}
	else 
	{
		bannerToDisp = bannerWeb;
	}

	ok = false;

	if (isMobile.matches)
	{
		ok = true;
		finlSbt('N');
	}
	else
	{
		image1 = parseFloat(document.Login.image1.value);
		image2 = parseFloat(document.Login.image2.value);
		alpha1 = document.Login.imageChr.value.substring(0,1).toUpperCase();
		alpha2 = document.Login.imageChr.value.substring(1,2).toUpperCase();

		if (alpha1 != arr[image1 - 1] || alpha2 != arr[image2 - 1])// || alpha3 != arr[image3 - 1])
		{
			displErr("Please type Text of Image");
			document.Login.imageChr.focus();
			return false;
		}
		else
			document.Login.imgValid.value = 'Y';

		var isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && typeof navigator !== 'undefined';
		var isIE11 = isBrowser && !!(window.MSInputMethodContext && document.documentMode);
		var isSafari = navigator.vendor && navigator.vendor.indexOf('Apple') > -1 &&
               navigator.userAgent &&
               navigator.userAgent.indexOf('CriOS') == -1 &&
               navigator.userAgent.indexOf('FxiOS') == -1;
		var iOS = !window.MSStream && /iPad|iPhone|iPod/.test(navigator.userAgent); // fails on iPad iOS 13

	//	alert("isIE11 : " + isIE11);
		if(isIE11 || isSafari || iOS)
		{
			if(confirm(bannerToDisp))
				ok = true;
			else
				ok = false;
			
			if (ok)
			{
			  finlSbt("N");
			}
		}
		else
		{
			document.getElementById("labelView").innerText =  bannerToDisp;
			$('#kt_modal_offer_a_deal').modal('show');
		}
	}
}

function finlSbt(currObjt)
{
	if(currObjt == "Y")
	{
		$("#btnSubmit").attr("disabled", true);
		$("#clsBtn").attr("disabled", true);
		$("#loader").show();
	}

	if(currObjt == "N")
		var button = document.querySelector("#btnSubmit");
	else 
		var button = document.querySelector("#finl_btnSubmit");

	button.setAttribute("data-kt-indicator", "on");

	//alert(document.Login.versinNo.value);
	document.Login.method = "POST";
	document.Login.action = tgrtDest;
	document.Login.submit();

}

$( document ).ready(function() 
{
	isMobile = window.matchMedia("only screen and (max-width: 760px)");
//alert(isMobile.matches);
	$("#isMobileDiv").show();
	$("#logoImage").show();

	if (isMobile.matches) 
	{
		$("#logoImage").show();
		var a = window.location.toString();
//alert(a);
		var name = "",
			mobileNo = "",
			appRegId = "",
			verOSdNo = "",
			siteMktg = "";
		if (a.indexOf("?") > 0)
		{
			namValPr = a.substring(a.indexOf("?")+1);
			namValPrArr = namValPr.split("&");
			mobileNo = namValPrArr[0].substring(namValPrArr[0].indexOf("=")+1);
			appRegId = namValPrArr[1].substring(namValPrArr[1].indexOf("=")+1);
			versinNo = namValPrArr[2].substring(namValPrArr[2].indexOf("=")+1);
			verOSdNo = namValPrArr[3].substring(namValPrArr[3].indexOf("=")+1);
			siteMktg = namValPrArr[4].substring(namValPrArr[4].indexOf("=")+1);
		}

//alert("mobileNo : " + mobileNo);
//alert("appRegId : " + appRegId);
		document.Login.isMobile.value = "true";
		document.Login.mobileNo.value = mobileNo;
		document.Login.appRegId.value = appRegId;
		if (appRegId != "")
		{
			document.Login.versinNo.value = versinNo;
		}
		document.Login.imgValid.value = "Y";
//		document.Login.siteMktg.value = siteMktg;
		document.Login.verOSdNo.value = verOSdNo;
		if (appRegId != "")
			$("#isMobileDiv").show();

/*		if (appRegId == "" || verOSdNo == "")
		{
//			abc = "https://play.google.com/store/apps/details?id=com.bw.sparsh";
			if(confirm ("Please update your App from Google Play Store Or iOS App Store to re-enable auto login."))
			{
				window.location.href = 'https://play.google.com/store/apps/details?id=com.bw.sparsh';
			}
			else
			{
				window.location.href = 'https://play.google.com/store/apps/details?id=com.bw.sparsh';
			}
		}
*/
		$("#captcha").hide();
		$("#foot").hide();

	 $("#login").show();  
/*		if (siteMktg == "S")
			document.getElementById("mobileDevice1").style.visibility = "hidden";
		else if (siteMktg == "M")
			document.getElementById("mobileDevice").style.visibility = "hidden";
*/
	}
	else
	{
//		imageGen();
		$("#captcha").show();
		$("#foot").show();
		 $("#login").show();  
		 $("#tpopup").hide();  
	}

});

function urlCall(currObjt)
{
	var currObjt = currObjt;
	if(currObjt == "S" && isMobile.matches)
	{
		location.href = "/Website.html";
	}
	else if(currObjt == "S")
	{
		window.open("https://www.birlawhite.com");	
	}
	else if(currObjt == "N")
	{
		location.href = "/Envr/Login/infPaintReg.jsp";	
	}
	else if(currObjt == "LO")
	{	var appRegid = document.Login.appRegId.value;
		var mobileNo = document.Login.mobileNo.value;
		var verOSdNo = document.Login.verOSdNo.value;
	//	 alert(appRegid);
		var loginIdn1 = document.Login.loginId.value.toUpperCase();
		  var lognIdps = "";

		if(loginIdn1.length == 10 && Number.isInteger(parseInt(document.Login.loginId.value)))
		{
			lognIdps = 	  loginIdn1;
		}
		location.href = "/Envr/Login/LoginMobOtp.jsp?appRegId=" + appRegid + "&imeiNumb=" + mobileNo + "&verOSdNo=" + verOSdNo + "&mobileNo=" + lognIdps ;	
	}
}
	//	http://stackoverflow.com/questions/3514784/what-is-the-best-way-to-detect-a-mobile-device-in-jquery
$("label").addClass("form-label fs-6 fw-bolder text-dark");
$("input[type=text]").addClass("form-control form-control-lg form-control-solid");
$("input[type=password]").addClass("form-control form-control-lg form-control-solid");

</script>

<script>
//$( window ).load(function() { $( '.landing' ).play(); });
	$("#loader").hide();
	$("#newLgn").hide();
	$("#unatiBtn").hide();
function toggleMute() {

  var video=document.getElementById("myVideo");

  video.muted = !video.muted;

}
$(document).ready(function() 
{
  $('body').bind('cut copy', function(e) 
  {
	  e.preventDefault();
  });

//$("body").on("contextmenu",function(e){return false;});

});
async function getClientIP() 
{
	try 
	{
		const response = await fetch('https://freegeoip.app/json/');
		const data = await response.json();
		document.getElementById('ip').textContent = `Your IP Address: ${data.ip}`;
	} 
	catch (error) 
	{
		console.error('Error fetching the IP address:', error);
	}
}
async function getClientIPLc()
{
	checkIpAndRedirect();
	var jsnAry = ""; 
	return new Promise(resolve => 
	{
	//	alert("1");
		$.ajax(
		{
			url:"https://api.db-ip.com/v2/free/self",    //the page containing php script
			type: "get",    //request type,
			//dataType: 'json',
		//	data:{pan:itxPanNo},
			success:function(response, data)
			{
				//apiLgIns(loginIdM, itxPanNo, "Zoop", "PAN No", JSON.stringify(reponse).replaceAll("\"", "@@"), "N", "apiId");	 // For Insert log data
				//jsnAry = reponse;
				const dataDisp = JSON.stringify(response);
				var jsonObj = JSON.parse(dataDisp);
				//alert(jsonObj["ipAddress"]);
				//alert(data);
                document.getElementById('ip').innerHTML = 'Your IP Address: ' + jsonObj["ipAddress"] + ' <br> ' + jsonObj["city"]  + ' <br> ' + jsonObj["stateProv"];
				console.log(response);		
			},
			error: function (err)
			{
				console.log(err);
			}
		});
	});
}
function showHint(str) 
{
  var xhttp;
 
  xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() 
  {
    if (this.readyState == 4 && this.status == 200) 
	{
      document.getElementById("ip").innerHTML = this.responseText;
    }
  };
  xhttp.open("GET", "https://api.db-ip.com/v2/free/self", true);
  xhttp.send(); 
  xhttp.abort();
}
 //getClientIPLc();

setInterval(onlinFlag, 5000);

function onlinFlag()
{
//	showHint();
	if(!navigator.onLine)
	{
		alert("Please check internet connection");
	}
}
//location.href= "https://birlawhite.easyglue.in/DaySummary.html";
//getappName();
</script>

<!--begin::Modal - Offer A Deal-->
		<div class="modal fade" id="kt_modal_offer_a_deal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" tabindex="-1" aria-hidden="true">
			<!--begin::Modal dialog-->
			<div class="modal-dialog modal-dialog-centered mw-600px">
				<!--begin::Modal content-->
				<div class="modal-content">
					<!--begin::Modal header-->
					<div class="modal-header py-7 d-flex justify-content-between">
						<!--begin::Modal title-->
						<h2>SPARSH Login</h2>

					<!--end::Modal title-->
				</div>
				<!--begin::Modal header-->
				<!--begin::Modal body-->
				<div class="modal-body scroll-y m-5">
					<!--begin::Stepper-->
					<div class="stepper stepper-links d-flex flex-column" id="kt_modal_offer_a_deal_stepper">
						<!--begin::Nav-->
						<div class="stepper-nav justify-content-center py-2">
							<div class="fv-row mb-15">
								<div class="d-flex flex-stack">
									<!--begin::Label-->
									<div class="me-5">
										<label style="text-align: justify;" class="fs-6 fw-bold" id="labelView"></label>
									</div>
									<!--begin::Label-->
								</div>
							</div>
						</div>	
						<!--begin::Nav-->
					</div>
					<!--begin::Stepper finlSbt()-->
				</div>
				<!--begin::Modal body-->
				<div class="modal-footer">
					<button type="button" class="btn btn-light" data-bs-dismiss="modal" id="clsBtn">Close</button>
					<button type="button" id="finl_btnSubmit" class="btn btn-primary" onClick="return finlSbt('Y')">
						<span class="indicator-label">OK</span>
						<span style= "color:pink;" class="indicator-progress">Please wait... We are fetching data
						<span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>
					</button>
				</div>
			</div>
		</div>
	<!--end::Modal - Offer A Deal-->

<style> 
/*  */
.animate-charcter
{
   text-transform: uppercase;
  background-image: linear-gradient(-225deg, #ffffff 0%, #1fc1ff 29%, #d12e64 67%, #4d3cdd 100%);
  background-size: auto auto;
  background-clip: border-box;
  background-size: 200% auto;
  color: #fff;
  background-clip: text;
  text-fill-color: transparent;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: textclip 2s linear infinite;
  display: inline-block;
      
}

@keyframes textclip 
{
  to 
  {
    background-position: 200% center;
  }
}




/*  */
.fw-bolder
{
font-weight: 400!important;
}

/*  */
.link-primary 
{
    color: #001dff;
}

.link-primary:focus, .link-primary:hover 
{
    color: #ffffff;
}




/* */
.form-control.form-control-solid 
{
    background-color: #ffffff00;
    border-color: #f5f8fa;
    color: #5e6278;
    transition: color .2s ease,background-color .2s ease;
}


.dropdown.show>.form-control.form-control-solid, .form-control.form-control-solid.active, .form-control.form-control-solid.focus, .form-control.form-control-solid:active, .form-control.form-control-solid:focus 
{
    background-color: #ffffff;
    border-color: #ffffff;
    color: #5e6278;
    transition: color .2s ease,background-color .2s ease;
}

</style>   





<%@ page errorPage="/Envr/JSP/ErrorPage.jsp" %>
<%@ include file="/Envr/Login/DirSetCom.jsp"%>
<%@ page language="java" import="java.sql.*" %>
<jsp:useBean id="WebDb" class="bw.Security.WebConn" scope="session"/>
<jsp:useBean id="KkrConn" class="bw.Security.KkrConn" scope="session"/>
<jsp:useBean id="WebSessBean" class="bw.CommApp.WebSessBean" scope = "session"/>
<jsp:useBean id="KkrSessBean" class="bw.CommApp.KkrSessBean" scope = "session"/>
<jsp:useBean id="XssFilter" class="bw.Security.XssFilter" scope="session"/>
<style>
body
{
	overflow-x: hidden;
	overflow-Y: hidden;
}
</style>
	   <link rel="stylesheet" href="/Envr/css/loginPage.css">
<div class="loader" id="loader">
	<svg class="circlespinner" viewBox="0 0 50 50">
		<circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle>
	</svg>
</div>

<%
XssFilter.requestSet(request);

ResultSet rset = null;

String  siteMktg = "",
		loginIdC = XssFilter.parSmGet("loginId").toUpperCase(),
		password = XssFilter.parSmGet("password"),
		sparhApp = XssFilter.parSmGet("sparhApp"),
		ipAdress = request.getRemoteAddr(),
		sesRanNo = "" + Math.random(),
		mobileNo = "",
		appRegId = "",
		versinNo = "",
		mobilOtp = "",
		otpLogFl = "N",
		countVal = "",
		verOSdNo = "",
		otpCheck = "",
		randNmSt = "",
		upImeiFl = "No",
		sql = "",
		emplName = "";

boolean testing = false,
		mobilApp = false;

if (testing)
{
	siteMktg = "M";
	session.setAttribute("siteMktg", siteMktg);
}
else
{
	if (XssFilter.parSmGet("siteMktg") != null)
		siteMktg = XssFilter.parSmGet("siteMktg");
//	System.out.println("XssFilter.parSmGet(isMobile) : " + XssFilter.parSmGet("isMobile") + " loginIdC : " + loginIdC);
	if (XssFilter.parSmGet("otpLogFl") != null)
		otpLogFl = XssFilter.parSmGet("otpLogFl");
	
//	System.out.println("otpLogFl : " + otpLogFl);
//	System.out.println("siteMktg : " + siteMktg);
	
	if(otpLogFl.equals("Y"))
	{
		if (XssFilter.parSmGet("mobileNo") != null)
			mobileNo = XssFilter.parSmGet("mobileNo");
		if (XssFilter.parSmGet("otpCheck") != null)
			otpCheck = XssFilter.parSmGet("otpCheck");
		if (XssFilter.parSmGet("randNmSt") != null)
			randNmSt = XssFilter.parSmGet("randNmSt");
		if (XssFilter.parSmGet("appRegId") != null)
			appRegId = XssFilter.parSmGet("appRegId");
		if (XssFilter.parSmGet("verOSdNo") != null)
			verOSdNo = XssFilter.parSmGet("verOSdNo");

//		System.out.println("mobileNo : " + mobileNo);
//		System.out.println("otpCheck : " + otpCheck);
//		System.out.println("randNmSt : " + randNmSt);
	}
%>
<%!
public static boolean isInteger(String s) 
{
	if(s.matches("[0-9]{10}"))
	{
		return true;
	}
	else
	{
		return false ;
	}
}

%>

<%
	//	System.out.println("siteMktg : " + siteMktg);
	//	System.out.println("otpLogFl : " + otpLogFl);
	//	System.out.println("loginIdC : " + loginIdC);
	
	if(((loginIdC.length() == 10 && isInteger(loginIdC) == true) || otpLogFl.equals("Y")) &&  siteMktg.equals("M"))
	{
		WebDb.srvrNameSet(request.getServerName());
		WebDb.creaConn();
		Connection conn = WebDb.getsConn();
		WebSessBean.setConn(conn);

		sql = "select count(*) from wcvLoginMas with (nolock) where (mobileNo = '" + loginIdC + "' or loginIdM = '" + loginIdC + "') and isActive = 'Y'";
		rset = WebSessBean.selectRecord(sql);
		if(rset.next())
		{
			countVal = rset.getString(1);
		}
		if(countVal.equals("1"))
		{
			sql = "select loginIdM from wcvLoginMas with (nolock) where (mobileNo = '" + loginIdC + "' or loginIdM = '" + loginIdC + "') and isActive = 'Y'";

			if(sparhApp.equals("N"))
				sql += " and userType in ('R','I') ";
			
			rset = WebSessBean.selectRecord(sql);
			if(rset.next())
			{
				loginIdC = rset.getString(1);
			}
		}
		else
		{
%>
			<jsp:forward page="LoginErrCom.jsp">
				<jsp:param name="message" value='invalid Mobile Or Mobile No Not Registered'/>
				<jsp:param name="notAgain" value='N'/>
			</jsp:forward>
<%
		}
		WebDb.logtConn();
	}
	else if(loginIdC.length() == 10 && isInteger(loginIdC) == true && siteMktg.equals("S"))
	{
		KkrConn.srvrNameSet(request.getServerName());
		KkrConn.creaConn();
		Connection conn = KkrConn.getsConn();
		KkrSessBean.setConn(conn);

		sql = "select count(*) from covLoginMas with (nolock) where mobileNo = '" + loginIdC + "' and isActive = 'Y' ";
		rset = KkrSessBean.selectRecord(sql);
		if(rset.next())
		{
			countVal = rset.getString(1);
		}
		if(countVal.equals("1"))
		{
			sql = "select loginIdn from covLoginMas with (nolock) where mobileNo = '" + loginIdC + "' and isActive = 'Y' ";

			rset = KkrSessBean.selectRecord(sql);
			if(rset.next())
			{
				loginIdC = rset.getString(1);
			}
		}
		else
		{
%>
			<jsp:forward page="LoginErrCom.jsp">
				<jsp:param name="message" value='invalid Mobile Or Mobile No Not Registered'/>
				<jsp:param name="notAgain" value='N'/>
			</jsp:forward>
<%
		}
		KkrConn.logtConn();
	//	sql = "select loginIdn from openquery(itkharia, 'select loginIdn from itkharia.dbo.covLoginMas with (nolock) where mobileNo = ''" + loginIdC + "'' and isActive = ''Y''') ";
	//	sql = "select 'S', emplName from openquery(itkharia, 'select emplName from itkharia.dbo.covLoginMas with (nolock) where loginIdn = ''" + loginIdC + "'' and isActive = ''Y''') ";

	}

	if (XssFilter.parSmGet("isMobile") != null)
	{
		if (Boolean.parseBoolean(XssFilter.parSmGet("isMobile")) == true)
		{
//	System.out.println("Boolean.parseBoolean(XssFilter.parSmGet(isMobile)) : " + Boolean.parseBoolean(XssFilter.parSmGet("isMobile")));
			if (XssFilter.parSmGet("mobileNo") != null)
				mobileNo = XssFilter.parSmGet("mobileNo");
			if (XssFilter.parSmGet("appRegId") != null)
				appRegId = XssFilter.parSmGet("appRegId");
			if (XssFilter.parSmGet("verOSdNo") != null)
				verOSdNo = XssFilter.parSmGet("verOSdNo");
			if (XssFilter.parSmGet("versinNo") != null)
				versinNo = XssFilter.parSmGet("versinNo");
			if (XssFilter.parSmGet("upImeiFl") != null)
				upImeiFl = XssFilter.parSmGet("upImeiFl");
			
			upImeiFl = "Yes";
		//	System.out.println("versinNo LoginCom : " + versinNo);
	/*		if (!upImeiFl.equalsIgnoreCase("Yes"))
			{
				mobileNo = "";
				appRegId = "";
				versinNo = "";
				verOSdNo = "";
			}
			Comment by Mr Rajendra Sikhwal on 12 July 2019
	*/	
			session.setAttribute("mobilApp", "true");
			mobilApp = true;
		}
		else
		{
			session.setAttribute("mobilApp", "false");
			mobilApp = false;
		}
	}
//	System.out.println("XssFilter.parSmGet(mobileNo) : " + mobileNo + " XssFilter.parSmGet(upImeiFl) : " + upImeiFl);


	if (XssFilter.parSmGet("imgValid").equals("Y"))
	{
		if (session.getAttribute("siteMktg") == null || mobilApp)
		{
/*			if (loginIdC.equals("PC0076") || loginIdC.equals("PS1388")) 
			{
				if (ipAdress.substring(0,6).equals("10.4.6"))
					;
				else
					throw new Exception("Someone trying to access transporters' id from internet");
			}
*/
			if (siteMktg.equals(""))
			{
				WebDb.srvrNameSet(request.getServerName());
				WebDb.creaConn();
				Connection conn = WebDb.getsConn();
				WebSessBean.setConn(conn);
//	WebSessBean.setSqlToDsp(true);
				sql = "select 'M', emplName from wcvLoginMas with (nolock) where loginIdM = '" + loginIdC + "' and isActive = 'Y'";

				if(sparhApp.equals("N"))
					sql += " and userType in ('R','I') ";
				rset = WebSessBean.selectRecord(sql);

				if(rset.next())
				{
					siteMktg = rset.getString(1);
					emplName = rset.getString(2);
//					System.out.println("siteMktg " + siteMktg);
				}
				else
				{
					sql = "select 'S', emplName emplName from itkharia.dbo.covLoginMas with (nolock) where loginIdn = '" + loginIdC + "' and isActive = 'Y' ";
					
					if(sparhApp.equals("N"))
						sql += " and userType in ('R','I') ";
			
					rset = WebSessBean.selectRecord(sql);

					if(rset.next())
					{
						siteMktg = rset.getString(1);
						emplName = rset.getString(2);
					}
					else
					{
%>
						<jsp:forward page="LoginErrCom.jsp">
							<jsp:param name="message" value='User / password invalid'/>
							<jsp:param name="notAgain" value='N'/>
						</jsp:forward>
<%
					}
				}
				WebDb.logtConn();
			}
			session.setAttribute("siteMktg", siteMktg);
		}
		else
		{
			// System.out.println("Error---");
%>
			<jsp:forward page="LoginErrCom.jsp">
				<jsp:param name="message" value='Your another session has been ended, do not use parallel Logins on single machine, Please login Again'/>
				<jsp:param name="notAgain" value='Y'/>
			</jsp:forward>
<%
		}
	}
	else if(!otpLogFl.equals("Y"))
	{
			//System.out.println("Error 2 ---");
%>
		<jsp:forward page="LoginErrCom.jsp">
			<jsp:param name="message" value='Please login properly'/>
			<jsp:param name="notAgain" value='Y'/>
		</jsp:forward>
<%
	}
}

session.setAttribute("sessStat", "0");
session.setAttribute("sesRanNo", sesRanNo);

if(!siteMktg.equals(""))
	session.setAttribute("siteMktg", siteMktg);

	 // System.out.println("siteMktg Login Com " + siteMktg);
if (siteMktg.equals("S"))
{
%>
	<jsp:forward page="LoginSTE.jsp">
		<jsp:param name="loginIdn" value='<%=loginIdC%>'/>
		<jsp:param name="realPass" value='<%=password%>'/>
		<jsp:param name="mobileNo" value='<%=mobileNo%>'/>
		<jsp:param name="appRegId" value='<%=appRegId%>'/>
		<jsp:param name="verOSdNo" value='<%=verOSdNo%>'/>
		<jsp:param name="versinNo" value='<%=versinNo%>'/>
	</jsp:forward>
<%
}
else
{
	//<jsp:forward page="LoginMKT.jsp"> // When regular working
	//<jsp:forward page="SiteUnderMaint.jsp"> // When under maintenance
%>
	<jsp:forward page="LoginMKT.jsp">
		<jsp:param name="loginIdM" value='<%=loginIdC%>'/>
		<jsp:param name="realPass" value='<%=password%>'/>
		<jsp:param name="mobileNo" value='<%=mobileNo%>'/>
		<jsp:param name="appRegId" value='<%=appRegId%>'/>
		<jsp:param name="verOSdNo" value='<%=verOSdNo%>'/>
		<jsp:param name="versinNo" value='<%=versinNo%>'/>
		<jsp:param name="otpCheck" value='<%=otpCheck%>'/>
		<jsp:param name="randNmSt" value='<%=randNmSt%>'/>
		<jsp:param name="otpLogFl" value='<%=otpLogFl%>'/>
	</jsp:forward>
<%
}
%>
