@page
@model ItadminPortal.Pages.Assets.AssetReportModel
@{
    ViewData["Title"] = "Asset Report";
}

@await Html.PartialAsync("_Header")

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<div class="container mt-5">
    <h2 class="text-center mb-4 fw-bold">ðŸ“Š Asset Report</h2>

    <div class="card shadow p-4 rounded-4">
        @if (Model.Assets.Count == 0)
        {
            <p class="text-center">No assets found.</p>
        }
        else
        {
            <table class="table table-striped table-bordered">
                <thead class="thead-dark">
                    <tr>
                        <th>Asset ID</th>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Serial No</th>
                        <th>Purchase Date</th>
                        <th>Warranty Expiry</th>
                        <th>Status</th>
                        <th>Assigned To</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var asset in Model.Assets)
                    {
                        <tr>
                            <td>@asset["AssetID"]</td>
                            <td>@asset["AssetName"]</td>
                            <td>@asset["AssetType"]</td>
                            <td>@asset["SerialNo"]</td>
                            <td>@((asset["PurchaseDate"] as DateTime?)?.ToShortDateString())</td>
                            <td>@((asset["WarrantyExpiry"] as DateTime?)?.ToShortDateString())</td>
                            <td>@asset["Status"]</td>
                            <td>@asset["AssignedTo"]</td>
                        </tr>
                    }
                </tbody>
            </table>
        }
    </div>
</div>

@await Html.PartialAsync("_Footer")










using Microsoft.AspNetCore.Mvc.RazorPages;
using AdminPortal.DataAccess;

namespace ItadminPortal.Pages.Assets
{
    public class AssetReportModel : PageModel
    {
        private readonly DatabaseHelper _db;

        public AssetReportModel(DatabaseHelper db)
        {
            _db = db;
        }

        public List<Dictionary<string, object>> Assets { get; set; } = new List<Dictionary<string, object>>();

        public void OnGet()
        {
            string query = "SELECT AssetID, AssetName, AssetType, SerialNo, PurchaseDate, WarrantyExpiry, Status, AssignedTo FROM Assets";
            Assets = _db.SessBean(query, null);
        }
    }
}

